(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{29:function(e,t,n){e.exports=n(44)},34:function(e,t,n){},36:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(22),s=n.n(o),i=(n(34),n(36),n(2)),c=n(3),u=n(6),l=n(4),p=n(7),h=n(5),d=n(47),m=n(45),b=n(48),v=n(12),f=n(8),O={sarahedo:{id:"sarahedo",name:"Sarah Edo",avatarURL:"https://api.adorable.io/avatars/40/sarahedo.png",answers:{"8xf0y6ziyjabvozdd253nd":"optionOne","6ni6ok3ym7mf1p33lnez":"optionOne",am8ehyc8byjqgar0jgpub9:"optionTwo",loxhs1bqm25b708cmbf3g:"optionTwo"},questions:["8xf0y6ziyjabvozdd253nd","am8ehyc8byjqgar0jgpub9"]},tylermcginnis:{id:"tylermcginnis",name:"Tyler McGinnis",avatarURL:"https://api.adorable.io/avatars/40/tylermcginnis.png",answers:{vthrdm985a262al8qx3do:"optionOne",xj352vofupe1dqz9emx13r:"optionTwo"},questions:["loxhs1bqm25b708cmbf3g","vthrdm985a262al8qx3do"]},johndoe:{id:"johndoe",name:"John Doe",avatarURL:"https://api.adorable.io/avatars/40/johndoe.png",answers:{xj352vofupe1dqz9emx13r:"optionOne",vthrdm985a262al8qx3do:"optionTwo","6ni6ok3ym7mf1p33lnez":"optionOne"},questions:["6ni6ok3ym7mf1p33lnez","xj352vofupe1dqz9emx13r"]}},j={"8xf0y6ziyjabvozdd253nd":{id:"8xf0y6ziyjabvozdd253nd",author:"sarahedo",timestamp:1467166872634,optionOne:{votes:["sarahedo"],text:"have horrible short term memory"},optionTwo:{votes:[],text:"have horrible long term memory"}},"6ni6ok3ym7mf1p33lnez":{id:"6ni6ok3ym7mf1p33lnez",author:"johndoe",timestamp:1468479767190,optionOne:{votes:[],text:"become a superhero"},optionTwo:{votes:["johndoe","sarahedo"],text:"become a supervillian"}},am8ehyc8byjqgar0jgpub9:{id:"am8ehyc8byjqgar0jgpub9",author:"sarahedo",timestamp:1488579767190,optionOne:{votes:[],text:"be telekinetic"},optionTwo:{votes:["sarahedo"],text:"be telepathic"}},loxhs1bqm25b708cmbf3g:{id:"loxhs1bqm25b708cmbf3g",author:"tylermcginnis",timestamp:1482579767190,optionOne:{votes:[],text:"be a front-end developer"},optionTwo:{votes:["sarahedo"],text:"be a back-end developer"}},vthrdm985a262al8qx3do:{id:"vthrdm985a262al8qx3do",author:"tylermcginnis",timestamp:1489579767190,optionOne:{votes:["tylermcginnis"],text:"find $50 yourself"},optionTwo:{votes:["johndoe"],text:"have your best friend find $500"}},xj352vofupe1dqz9emx13r:{id:"xj352vofupe1dqz9emx13r",author:"johndoe",timestamp:1493579767190,optionOne:{votes:["johndoe"],text:"write JavaScript"},optionTwo:{votes:["tylermcginnis"],text:"write Swift"}}};function g(e){var t=e.optionOneText,n=e.optionTwoText,a=e.author;return{id:Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15),timestamp:Date.now(),author:a,optionOne:{votes:[],text:t},optionTwo:{votes:[],text:n}}}var E="RECEIVE_USERS",y="ADD_USER_QUESTIONS";function w(e){return{type:E,users:e}}var U="RECEIVE_QUESTIONS",q="ADD_QUESTION";function k(e){return{type:U,questions:e}}var x="RECEIVE_STATS";function T(e){return{type:x,stats:e}}function N(e,t){return e.votes.includes(t)}function S(e){for(var t,n,a={},r=Object.keys(e),o=0;o<r.length;o++){var s=r[o],i={questionId:"",optionOne:{},optionTwo:{}},c=(t=e[s].optionOne.votes.length,n=e[s].optionTwo.votes.length,t+n>0?{a:Math.round(t/(t+n)*100),b:100-Math.round(t/(t+n)*100)}:{a:0,b:0});i.questionId=s,i.optionOne.votersNumber=e[s].optionOne.votes.length,i.optionTwo.votersNumber=e[s].optionTwo.votes.length,i.optionOne.votersPercent=c.a,i.optionTwo.votersPercent=c.b,a[i.questionId]=i}return a}function L(e){e?localStorage.loggedUser=e:localStorage.removeItem("loggedUser")}function I(e){!e.authedUser&&!localStorage.loggedUser&&e.history.push("/login")}function D(){return function(e){return new Promise(function(e,t){setTimeout(function(){return e(Object(f.a)({},O))},1e3)}).then(function(t){e(w(t))})}}function C(e){return function(t){return new Promise(function(e,t){setTimeout(function(){return e(Object(f.a)({},j))},1e3)}).then(function(n){t(k(n)),t(T(S(n))),-1!==e.location.pathname.indexOf("/questions/")&&(n.hasOwnProperty(e.location.pathname.slice(11))||e.push("/404"))})}}function A(e){return function(t){return function(e){var t=e.authedUser,n=e.qid,a=e.answer;return new Promise(function(e,r){setTimeout(function(){O=Object(f.a)({},O,Object(v.a)({},t,Object(f.a)({},O[t],{answers:Object(f.a)({},O[t].answers,Object(v.a)({},n,a))}))),j=Object(f.a)({},j,Object(v.a)({},n,Object(f.a)({},j[n],Object(v.a)({},a,Object(f.a)({},j[n][a],{votes:j[n][a].votes.concat([t])}))))),e({users:O,questions:j})},500)})}(e).then(function(e){t(w(e.users)),t(k(e.questions)),t(T(S(e.questions)))})}}var B="SET_AUTHED_USER";function _(e){return{type:B,authedUser:e}}var R=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).handleUserSelection=function(){n.props.dispatch(_(n.props.userId)),L(n.props.userId),n.props.history.goBack()},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.currentUserData[e.userId];return r.a.createElement("li",{onClick:this.handleUserSelection},r.a.createElement("span",null,r.a.createElement("img",{src:t.avatarURL,alt:t.name+"'s avatar"}),r.a.createElement("span",null,t.name)))}}]),t}(a.Component);var V=Object(m.a)(Object(h.b)(function(e){return{currentUserData:e.users}})(R)),z=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"userList"},r.a.createElement("h2",null,"Please select an user"),r.a.createElement("ul",{className:"userListElements"},this.props.userIds.map(function(e){return r.a.createElement(V,{key:e,userId:e})})))}}]),t}(a.Component);var P=Object(h.b)(function(e){var t=e.users;return{userIds:Object.keys(t).sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())})}})(z),Q=n(46);var M=function(){return r.a.createElement(a.Fragment,null,r.a.createElement("p",null,"Welcome! For access the App's functionalities please log in:\xa0",r.a.createElement(Q.a,{to:"/login"},"Login")))},F=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).handleLogout=function(){n.props.dispatch(_(null)),L(),n.props.history.push("/")},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.userName,n=e.avatarUrl,o=e.authedUser;return r.a.createElement(a.Fragment,null,r.a.createElement("span",{className:"barInfo-element"},t),""!==n&&r.a.createElement("img",{className:"avatar",src:n,alt:t+"'s Avatar"}),null!==o?r.a.createElement(a.Fragment,null,r.a.createElement(Q.a,{className:"barInfo-element",to:"/leaderboard"},"Leaderboard"),r.a.createElement(Q.a,{className:"barInfo-element",to:"/add"},"Add Question"),r.a.createElement("span",{className:"logoutLink",onClick:this.handleLogout},"Logout")):r.a.createElement(Q.a,{to:"/login"},"Login"))}}]),t}(a.Component),W=Object(m.a)(Object(h.b)()(F)),J=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).handleVoting=function(e){if(!n.state.isVotingDisabled){var t=n.props.authedUser,a=n.props.id;n.setState({isVotingDisabled:!0}),n.props.dispatch(A({authedUser:t,qid:a,answer:e})).then(function(){n.setState({isVoted:!0})})}},n.isUserInQuestionsPath=function(){return-1!==n.props.location.pathname.indexOf("/questions/")},n.state={isVoted:null,isVotingDisabled:!1},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.isUserInQuestionsPath(),this.setState(function(){return{isVoted:N(e.props.questions.optionOne,e.props.authedUser)||N(e.props.questions.optionTwo,e.props.authedUser)}})}},{key:"render",value:function(){var e=this,t=this.props.questions,n=t.optionOne,a=t.optionTwo,o=this.props.authorData;return r.a.createElement("div",{className:"poolList-element"},r.a.createElement("div",{className:"poolList-element__wrapper"},r.a.createElement("div",{className:"poolList-element__question"+(N(this.props.questions.optionOne,this.props.authedUser)?" poolList-element__question--selected":"")},r.a.createElement("span",null,"Option 1: ",n.text),this.isUserInQuestionsPath()&&this.state.isVoted&&this.props.stats[this.props.id]&&r.a.createElement("span",null,r.a.createElement("span",{className:"votersNumber"},"# of voters: ",this.props.stats[this.props.id].optionOne.votersNumber),r.a.createElement("span",null,this.props.stats[this.props.id].optionOne.votersPercent," %")),!this.state.isVoted&&this.props.votingSection&&r.a.createElement("div",{className:"btn poolBtn"+(this.state.isVotingDisabled?" btn--disabled":"")},r.a.createElement("span",{onClick:function(){return e.handleVoting("optionOne")}},"Vote"))),r.a.createElement("hr",null),r.a.createElement("div",{className:"poolList-element__question"+(N(this.props.questions.optionTwo,this.props.authedUser)?" poolList-element__question--selected":"")},r.a.createElement("span",null,"Option 2: ",a.text),this.isUserInQuestionsPath()&&this.state.isVoted&&this.props.stats[this.props.id]&&r.a.createElement("span",null,r.a.createElement("span",{className:"votersNumber"},"# of voters: ",this.props.stats[this.props.id].optionTwo.votersNumber),r.a.createElement("span",null,this.props.stats[this.props.id].optionTwo.votersPercent," %")),!this.state.isVoted&&this.props.votingSection&&r.a.createElement("div",{className:"btn poolBtn"+(this.state.isVotingDisabled?" btn--disabled":"")},r.a.createElement("span",{onClick:function(){return e.handleVoting("optionTwo")}},"Vote")))),r.a.createElement("div",{className:"poolList-element__author"},r.a.createElement("span",{className:"poolList-element__author"},"Created by:\xa0",o.name),r.a.createElement("img",{className:"avatar",src:o.avatarURL,alt:o.name+"'s Avatar"})))}}]),t}(a.Component);var H=Object(m.a)(Object(h.b)(function(e){return{authedUser:e.authedUser,stats:e.stats}})(J)),$=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={displayAnswered:!1},n.handleToggle=function(){n.setState(function(){return{displayAnswered:!n.state.displayAnswered}})},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.answeredQuestions,a=t.unansweredQuestions,o=this.state.displayAnswered?n:a;return r.a.createElement("div",null,r.a.createElement("div",{className:"btn poolBtn"},r.a.createElement("span",{onClick:this.handleToggle},"Display",this.state.displayAnswered?" unanswered":" answered")),r.a.createElement("h2",null,this.state.displayAnswered?"Answered ":"Unanswered "," questions"),o.map(function(t){return r.a.createElement(Q.a,{key:t.id,to:"/questions/"+t.id,className:"poolList-link"},r.a.createElement(H,{id:t.id,questions:t,authorData:e.props.users[t.author]}))}))}}]),t}(a.Component);var G=Object(h.b)(function(e){var t=e.authedUser,n=e.questions,a=e.users,r=function(e,t){for(var n=[],a=[],r=Object.keys(e),o=0;o<r.length;o++){var s=r[o];e[s].optionOne.votes.includes(t)||e[s].optionTwo.votes.includes(t)?a.push(e[s]):n.push(e[s])}return a.sort(function(e,t){return t.timestamp-e.timestamp}),n.sort(function(e,t){return t.timestamp-e.timestamp}),{unanswered:n,answered:a}}(n,t);return{authedUser:t,unansweredQuestions:r.unanswered,answeredQuestions:r.answered,users:a}})($),K=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).handleBack=function(){n.props.history.push("/")},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){I(this.props)}},{key:"render",value:function(){var e,t=this.props.match.params.questionId,n=this.props.questions[t];return n&&(e=this.props.users[n.author]),r.a.createElement(a.Fragment,null,r.a.createElement("h1",null,"Would you rather"),r.a.createElement("div",{className:"btn backBtn"},r.a.createElement("span",{onClick:this.handleBack},"Back")),r.a.createElement("h2",null,"Question details (id: ",this.props.match.params.questionId,")"),e&&r.a.createElement("div",null,r.a.createElement(H,{id:t,questions:n,authorData:e,votingSection:!0})))}}]),t}(a.Component);var X=Object(m.a)(Object(h.b)(function(e){return{authedUser:e.authedUser,users:e.users,questions:e.questions}})(K)),Y=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).handleBackToHome=function(){n.props.history.push("/")},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(a.Fragment,null,r.a.createElement("h2",null,"404 - Resource not found"),r.a.createElement("p",null,"Unfortunately the resource you where looking cannot be found."),r.a.createElement("div",{className:"btn"},r.a.createElement("span",{onClick:this.handleBackToHome},"Go back to home")))}}]),t}(a.Component),Z=Object(m.a)(Y),ee=n(27),te=n.n(ee),ne=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={isSubmitBtnDisabled:!1,errorMessage:!1},n.handleBack=function(){n.props.history.push("/")},n.handleSubmit=function(e){e.preventDefault();var t,a=document.querySelector("#addForm"),r=te()(a,{hash:!0});if(n.state.isSubmitBtnDisabled||2!==Object.keys(r).length)n.setState({errorMessage:!0}),setTimeout(function(){n.setState({errorMessage:!1})},4e3);else{n.setState({isSubmitBtnDisabled:!0});var o={};o.optionOneText=r.optionOne,o.optionTwoText=r.optionTwo,o.author=localStorage.loggedUser,(t=o,new Promise(function(e,n){var a=t.author,r=g(t);setTimeout(function(){j=Object(f.a)({},j,Object(v.a)({},r.id,r)),O=Object(f.a)({},O,Object(v.a)({},a,Object(f.a)({},O[a],{questions:O[a].questions.concat([r.id])}))),e(r)},1e3)})).then(function(e){n.props.dispatch({type:q,question:e}),n.props.dispatch(function(e){return{type:y,question:e}}({author:n.props.authedUser,newQuestion:e.id})),n.props.history.push("/")})}},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){I(this.props)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Would you Rather"),r.a.createElement("div",{className:"btn backBtn"},r.a.createElement("span",{onClick:this.handleBack},"Back")),r.a.createElement("form",{id:"addForm"},r.a.createElement("label",{htmlFor:"optionOne"},"Option 1:"),r.a.createElement("input",{id:"optionOne",type:"text",name:"optionOne",placeholder:"Please enter the 1st option"}),r.a.createElement("label",{htmlFor:"optionTwo"},"Option 2:"),r.a.createElement("input",{id:"optionTwo",type:"text",name:"optionTwo",placeholder:"Please enter the 2nd option"}),r.a.createElement("div",{className:"btn"+(this.state.isSubmitBtnDisabled?" btn--disabled":"")},r.a.createElement("span",{onClick:this.handleSubmit},"Submit"))),r.a.createElement("p",{className:(this.state.errorMessage?"":"hidden ")+"errorMessage"},"Error! Input fields must be both populated with a sentence!"))}}]),t}(a.Component);var ae=Object(m.a)(Object(h.b)(function(e){return{authedUser:e.authedUser}})(ne)),re=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).handleBack=function(){n.props.history.push("/")},n.rankedUsers=function(e){return e.map(function(e){return{id:e,name:n.props.users[e].name,avatarURL:n.props.users[e].avatarURL,answers:Object.keys(n.props.users[e].answers).length,questions:n.props.users[e].questions.length,total:Object.keys(n.props.users[e].answers).length+n.props.users[e].questions.length}}).sort(function(e,t){return t.total-e.total})},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){I(this.props)}},{key:"render",value:function(){var e=this.props,t=e.users,n=e.usersKeys,o=e.authedUser;return r.a.createElement(a.Fragment,null,r.a.createElement("h1",null,"Leaderboard"),r.a.createElement("div",{className:"btn backBtn"},r.a.createElement("span",{onClick:this.handleBack},"Back")),r.a.createElement("div",{className:"leaderboard-wrapper"},r.a.createElement("div",{className:"leaderboard-userInfo"},t[o]&&this.rankedUsers(n).map(function(e){return r.a.createElement("div",{key:e.id,className:"leaderboard-userInfo-details"},r.a.createElement("p",null,e.name),r.a.createElement("img",{className:"avatar",src:e.avatarURL,alt:e.name+"'s Avatar"}),r.a.createElement("p",null,"Answers: ",e.answers),r.a.createElement("p",null,"Questions: ",e.questions),r.a.createElement("p",null,r.a.createElement("b",null,"Total: ",e.total)))}))))}}]),t}(a.Component);var oe=Object(m.a)(Object(h.b)(function(e){var t=e.users;return{users:t,authedUser:e.authedUser,usersKeys:Object.keys(t)}})(re)),se=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(D()),localStorage.loggedUser&&this.props.dispatch(_(localStorage.loggedUser)),this.props.dispatch(C(this.props.history))}},{key:"render",value:function(){var e=this,t={};return this.props.users[this.props.authedUser]?t.name=this.props.users[this.props.authedUser].name:t.name="User not logged in",this.props.users[this.props.authedUser]?t.avatarURL=this.props.users[this.props.authedUser].avatarURL:t.avatarURL="",r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"barInfo-wrapper"},r.a.createElement("header",null,r.a.createElement(W,{userName:t.name,avatarUrl:t.avatarURL,authedUser:this.props.authedUser}))),r.a.createElement("div",{className:"appWrapper"},r.a.createElement(d.a,null,r.a.createElement(b.a,{exact:!0,path:"/",render:function(){return r.a.createElement(a.Fragment,null,r.a.createElement("h1",null,"Would you Rather"),!e.props.authedUser&&r.a.createElement(M,null),e.props.authedUser&&r.a.createElement(G,null))}}),r.a.createElement(b.a,{exact:!0,path:"/login",component:P}),r.a.createElement(b.a,{exact:!0,path:"/404",component:Z}),r.a.createElement(b.a,{exact:!0,path:"/add",component:ae}),r.a.createElement(b.a,{exact:!0,path:"/leaderboard",component:oe}),r.a.createElement(b.a,{path:"/questions/:questionId",component:X}),r.a.createElement(b.a,{component:Z}))))}}]),t}(a.Component);var ie=Object(m.a)(Object(h.b)(function(e){return{users:e.users,authedUser:e.authedUser}})(se));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ce=n(13);var ue=Object(ce.c)({authedUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return t.authedUser;default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(f.a)({},e,t.users);case y:return e[t.question.author].questions.push(t.question.newQuestion),Object(f.a)({},e);default:return e}},questions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return Object(f.a)({},e,t.questions);case q:return Object(f.a)({},e,Object(v.a)({},t.question.id,t.question));default:return e}},stats:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(f.a)({},e,t.stats);default:return e}}}),le=n(28),pe=Object(ce.a)(le.a),he=n(49),de=Object(ce.d)(ue,pe);s.a.render(r.a.createElement(h.a,{store:de},r.a.createElement(he.a,null,r.a.createElement(ie,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[29,2,1]]]);
//# sourceMappingURL=main.579f7780.chunk.js.map